<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savoré - Checkout</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="signup_style.css"> <!-- Base styles -->
    <link rel="stylesheet" href="order_style.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="Gourmet Haven Logo">
            </a>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            <!-- Centered Navigation Links -->
            <ul class="nav-menu center-nav">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#about" class="nav-link">About Us</a></li>
                <li><a href="menu.html" class="nav-link">Menu</a></li>
                <li><a href="index.html#gallery" class="nav-link">Gallery</a></li>
            </ul>

            <!-- Right Aligned Auth Buttons -->
            <ul class="nav-auth">
                <li><a href="restaurant_login.html" class="nav-link btn-login">Login</a></li>
                <li><a href="restaurant_signup.html" class="nav-link btn-signup">Sign Up</a></li>
            </ul>
        </div>
    </nav>
    <!-- Reuse Background -->
    <div class="background-slider">
        <div class="slide active" style="background-image: url('images/background3.jpg')"></div>
    </div>

    <div class="order-container">
        <a href="menu.html" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5" />
                <path d="M12 19l-7-7 7-7" />
            </svg>
            Back to Menu
        </a>

        <div class="checkout-layout">
            <!-- Cart Section -->
            <div class="cart-section">
                <div class="section-title">
                    <h2>Your Order</h2>
                    <span id="itemCount">0 items</span>
                </div>

                <div class="cart-items" id="cartItems">
                    <!-- Items injected via JS -->
                    <div class="empty-cart">Your plate is empty. Go add some delicious food!</div>
                </div>
            </div>

            <!-- Checkout Form Section -->
            <div class="checkout-section">
                <div class="glass-form">
                    <h2>Delivery Details</h2>
                    <br>
                    <form id="checkoutForm">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Delivery Address</label>
                            <textarea rows="3" placeholder="Street, Apt, City..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" placeholder="+1 234..." required>
                        </div>

                        <div class="total-row">
                            <span>Total</span>
                            <span id="grandTotal">$0.00</span>
                        </div>

                        <button type="submit" class="place-order-btn">Place Order</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-custom">


        <!-- Bottom Bar -->
        <div class="footer-bottom-bar">
            <div class="container footer-bottom-content">
                <div class="footer-brand-centered">
                    <img src="images/logo.png" alt="Bakery Logo">
                    <h2>Gourmet Haven</h2>
                </div>
                <p class="copyright-text">Copyright &copy; 2025. All rights reserved.</p>
                <div class="social-icons-round">
                    <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#"><i class="fa-brands fa-google-plus-g"></i></a>
                    <a href="#"><i class="fa-brands fa-linkedin-in"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                </div>
            </div>
        </div>
    </footer>
    <script src="script.js"></script>
    <script>
        // Use localstorage shared with menu.html
        let cart = JSON.parse(localStorage.getItem('savorCart')) || [];
        const cartItemsContainer = document.getElementById('cartItems');
        const grandTotalEl = document.getElementById('grandTotal');
        const itemCountEl = document.getElementById('itemCount');

        function renderCart() {
            cartItemsContainer.innerHTML = '';
            let total = 0;
            let count = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<div class="empty-cart">Your plate is empty. Go add some delicious food!</div>';
            } else {
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    count += item.quantity;

                    const el = document.createElement('div');
                    el.className = 'cart-item';
                    el.style.animationDelay = `${index * 0.1}s`;
                    el.innerHTML = `
                        <img src="${item.image}" alt="${item.title}">
                        <div class="item-details">
                            <h3>${item.title}</h3>
                            <div class="price">$${item.price.toFixed(2)}</div>
                        </div>
                        <div class="item-controls">
                            <button class="qty-btn" onclick="updateQty(${index}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQty(${index}, 1)">+</button>
                        </div>
                        <button class="remove-btn" onclick="removeItem(${index})">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    `;
                    cartItemsContainer.appendChild(el);
                });
            }

            grandTotalEl.textContent = '$' + total.toFixed(2);
            itemCountEl.textContent = count + (count === 1 ? ' item' : ' items');
        }

        window.updateQty = (index, change) => {
            if (cart[index].quantity + change > 0) {
                cart[index].quantity += change;
            } else if (change === -1) {
                // If reducing to 0, ask to confirm removal
                if (confirm("Remove this item?")) {
                    cart.splice(index, 1);
                } else {
                    return;
                }
            }
            saveCart();
        };

        window.removeItem = (index) => {
            cart.splice(index, 1);
            saveCart();
        };

        function saveCart() {
            localStorage.setItem('savorCart', JSON.stringify(cart));
            renderCart();
        }

        // Checkout 
        document.getElementById('checkoutForm').addEventListener('submit', (e) => {
            e.preventDefault();
            if (cart.length === 0) {
                alert("Your cart is empty!");
                return;
            }
            // Mock submission
            if (confirm("Place order for " + grandTotalEl.textContent + "?")) {
                localStorage.removeItem('savorCart');
                cart = [];
                renderCart();
                alert("Order Placed Successfully! Bon Appétit!");
                window.location.href = 'menu.html';
            }
        });

        renderCart();
    </script>
</body>

</html>